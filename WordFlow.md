# 🎯 Qulome 项目完整交互逻辑描述

微信文章排版工具的完整交互逻辑：

## 📱 整体架构与界面体系

### 🏗️ 核心架构
Qulome 采用**单页应用架构**，包含6个主要界面：
1. **欢迎界面** - 应用启动入口，提供两种工作路径选择
2. **主视图** - Quill富文本编辑器 + 实时预览
3. **图标库** - 图标管理与插入功能
4. **主题库** - 主题创建、编辑、应用
5. **草稿仓** - 文档存储与批量处理
6. **发布仓** - 成品预览与导出

### 🎨 视觉设计统一性
- **整体背景**: 简洁白色背景 
- **主题色**: 紫色系 

## 🚀 用户启动与导航流程

### 🎪 欢迎界面交互逻辑
**启动场景**：
```
用户打开应用 → 显示欢迎界面
├── 中央显示 "κύλημα" 希腊艺术字
├── 副标题 "文字可以很美"
└── 两个并列按钮：
    ├── [选择模版] → 直接跳转主题库界面
    └── [直接开始] → 直接跳转编辑器界面（使用默认主题）
```

**按钮交互反馈**：
- **默认状态**: 紫色边框 + 透明背景 + 紫色文字
- **悬停状态**: 紫色背景（10%透明度）+ 阴影效果
- **点击状态**: 紫色背景 + 白色文字

### 🧭 侧边栏导航系统
**导航结构**：
```
┌──────────────┐
│   Qulome     │ ← Logo（可点击返回欢迎界面）
├──────────────┤
│    主视图     │ ← 富文本编辑器
│    图标库     │ ← 图标管理
│    主题库     │ ← 主题管理
│    草稿仓     │ ← 文档存储
│    发布仓     │ ← 成品管理
└──────────────┘
```

**导航逻辑**：
- 侧边栏始终显示
- 点击Logo返回欢迎界面
- 点击功能按钮跳转到对应界面
- 界面切换刷新，单页应用路由

## ✍️ 编辑器核心交互逻辑

### 📝 富文本编辑系统
**技术选择**：使用Quill.js富文本编辑器

**编辑器功能**：
- 完整的富文本工具栏（粗体、斜体、下划线、链接等）
- 实时预览功能
- 支持图标插入（通过工具栏按钮）
- 主题样式实时应用

### 🎯 图标插入交互流程
**完整流程**：
```
编辑器界面 → 点击工具栏图标按钮 → 弹出图标库浮层
├── 浮层显示已保存的图标网格
├── 
├── 点击选择图标 → 插入图标预览
└── 浮层自动关闭 → 继续编辑
```

**技术实现**：
- 编辑时显示简化标记 `[icon:文件]`
- 预览时转换为实际SVG图标
- 导出时转换为微信编辑器兼容的HTML

### 💾 自动保存与状态管理
**保存策略**：
- **触发条件**: 用户停止输入2-3秒后自动保存
- **状态提醒**: 任何文本更改都标记为"未保存"
- **切换保护**: 切换页面时弹出保存确认对话框

**状态管理逻辑**：
```
内容变更 → 标记未保存状态 → 显示提醒
├── 继续编辑 → 停止输入2-3秒 → 自动保存 → 清除未保存状态
└── 切换页面 → 弹出确认 → 选择保存/丢弃 → 执行相应操作
```

## 🎨 主题系统交互逻辑

### 🏛️ 主题库界面布局
**三栏布局结构**：
```
┌─────────────────────────────────────────────────────────┐
│ 左侧导航栏     │     中间主题展示区域      │  右侧创建区域  │
│ ├─ 主视图      │  ┌─────────────────────┐ │ 从这里开始    │
│ ├─ 图标库      │  │    我的主题库        │ │              │
│ ├─ 主题库 ✓    │  │    2×2网格展示      │ │ 为您的新主题  │
│ ├─ 草稿仓      │  │ ┌─────┐  ┌─────┐   │ │ 命名...      │
│ └─ 发布仓      │  │ │主题1 │  │主题2 │   │ │              │
│               │  │ │      │  │     │   │ │ [创建并编辑   │
│               │  │ └─────┘  └─────┘   │ │  新主题]     │
│               │  │ ┌─────┐  ┌─────┐   │ │              │
│               │  │ │主题3 │  │主题4 │   │ │              │
│               │  │ │     │  │   │   │ │              │
│               │  │ └─────┘  └─────┘   │ │              │
└─────────────────────────────────────────────────────────┘
```

### 🎪 主题卡片交互逻辑
**主题卡片结构**：
- 主题名称（如："阅读——橙黄V.03"）
- 预览内容（文本+链接+引用+列表）
- 双按钮：[开始] 和 [编辑]

**交互行为**：
```
主题卡片交互：
├── 点击[开始]按钮 → 应用主题到编辑器 → 跳转到编辑器界面
├── 点击[编辑]按钮 → 弹出主题编辑器 → 修改主题
```

### 🔧 主题编辑器详细交互
**编辑器布局**：
```
┌─────────────────────────────────────────────────────────┐
│ 左侧手风琴编辑区域        │    右侧固定预览区域        │
│ ┌─────────────────────┐  │  ┌─────────────────────┐   │
│ │ ▼ 基础设置 (默认展开) │  │  │     实时预览区域     │   │
│ │   - 主题名称         │  │  │   (350px固定宽度)   │   │
│ │   - 主题描述         │  │  │                    │   │
│ │   - 主色调选择       │  │  │   实时渲染效果      │   │
│ │ ► 标题样式 (折叠)    │  │  │                    │   │
│ │ ► 正文样式 (折叠)    │  │  │                    │   │
│ │ ► 链接样式 (折叠)    │  │  │                    │   │
│ │ ► 代码块样式 (折叠)  │  │  │                    │   │
│ │ ► 分隔线样式 (折叠)  │  │  │                    │   │
└─────────────────────────────────────────────────────────┘
```

**实时预览逻辑**：
- **触发机制**: 每个参数更改都立即更新预览
- **预览内容**: 标准文章格式（标题+段落+链接+引用+代码+分隔线）
- **参数控制**: 滑块、颜色选择器、下拉选择等交互控件
- **保存机制**: 停止输入2-3秒后自动保存

**手风琴交互**：
```
手风琴展开/折叠逻辑：
├── 基础设置：默认展开，包含主题名称、描述、主色调
├── 其他分类：默认折叠，点击标题展开/折叠
├── 展开动画：CSS transition实现平滑动画
└── 单独控制：每个分类独立展开/折叠状态
```

## 🗂️ 文档管理交互逻辑

### 📄 Markdown文档处理流程
**批量导入逻辑**：
```
用户选择多个MD文件 → 批量处理流程：
├── 1. 读取MD文档内容
├── 2. 自动清除所有空行（用户无感知）
├── 3. 解析MD为HTML格式
├── 4. 直接生成草稿条目存储到草稿仓
└── 5. 显示草稿列表（不进入编辑器）
```

**单文档编辑流程**：
```
草稿仓界面 → 点击单个草稿 → 进入编辑器
├── 草稿内容加载到Quill编辑器
├── 支持富文本编辑和主题应用
└── 编辑完成后保存回草稿仓或发布
```

### 📦 草稿仓批量操作
**界面布局**：
```
草稿列表展示：
☑ 草稿1 - 标题A （复选框选择）
☐ 草稿2 - 标题B
☑ 草稿3 - 标题C
[应用主题] [删除] [移动到发布仓] （批量操作按钮）
```

**批量操作逻辑**：
- 复选框多选机制
- 批量应用主题：选择主题后应用到所有选中草稿
- 批量删除：确认后删除所有选中草稿
- 批量发布：移动选中草稿到发布仓

## 🎨 图标库管理系统

### 🖼️ 图标库界面布局
**左右分栏设计**：
```
┌─────────────────────────────────────────────────────────┐
│ 左侧导航栏     │           右侧主内容区域                │
│ ├─ 图标库 ✓    │  ┌─────────────────────────────────────┐ │
│               │  │    我的图标库    [分类: 全部 ▼]     │ │
│               │  ├─────────────────────────────────────┤ │
│               │  │  已存图标展示区域 │ 添加新图标区域   │ │
│               │  │ (自适应网格布局) │ (固定350px宽度)  │ │
│               │  │                 │                │ │
│               │  │ 🗂️ 📊 🏐 ⚡ 🎯   │ 输入名称:       │ │
│               │  │ 🔋 👆 💪 ➡️ 📥   │ [___________] │ │
│               │  │ 🔲 📱 ⭐ 🎨 📝   │ SVG代码:       │ │
│               │  │                 │ [___________] │ │
│               │  │                 │ [保存到图标库]   │ │
└─────────────────────────────────────────────────────────┘
```

### 🔍 图标分类与筛选
**分类系统**：
- 下拉选择器位置：标题栏右侧
- 分类选项：自定义
- 实时筛选：选择分类后立即过滤显示

**图标网格布局**：
- 图标统一尺寸：32px × 32px
- CSS Grid自适应：`repeat(auto-fill, minmax(80px, 1fr))`
- 悬停交互：鼠标悬停显示操作按钮（复制/删除）
- 平时隐藏操作按钮保持界面简洁

### ➕ 图标添加流程
**添加交互**：
```
右侧添加区域操作：
├── 选择分类（下拉选择器）
├── 输入图标名称
├── 粘贴SVG代码
├── 点击[保存到图标库]按钮
└── 图标添加到对应分类，左侧网格实时更新
```

## 🚀 发布与导出系统

### 📤 发布仓功能
**发布仓作用**：
- 存储已完成的文章成品
- 提供最终预览功能
- 支持批量导出操作
- 格式转换为微信编辑器兼容的HTML

**导出逻辑**：
```
发布仓文章 → 点击导出 → 格式转换：
├── 简化图标标记 [icon:名称] → 转换为实际SVG代码
├── 富文本格式 → 转换为微信编辑器兼容HTML
├── 主题样式 → 内联CSS样式
└── 生成最终HTML文件供复制粘贴
```

## 🔄 跨界面联动逻辑

### 🔗 界面间数据流转
**主要数据流**：
```
欢迎界面 → 选择路径 → 目标界面
主题库 → 应用主题 → 编辑器（主题生效）
编辑器 → 保存草稿 → 草稿仓
草稿仓 → 编辑 → 编辑器
草稿仓 → 发布 → 发布仓
图标库 → 选择图标 → 编辑器（浮层插入）
```

### 💾 数据持久化策略
**存储机制**：
- 使用浏览器localStorage存储所有数据
- 主题配置存储为JSON格式
- 图标存储为SVG代码+元数据
- 草稿和发布文档存储为HTML格式
- 自动保存策略确保数据不丢失

## 🎯 用户体验优化点

### ⚡ 即时反馈机制
1. **实时预览**：主题编辑器参数调整立即反映在预览区
2. **状态提示**：未保存内容实时提醒
3. **操作反馈**：按钮悬停、点击状态清晰反馈
4. **智能保存**：用户停止输入后智能保存

### 🛡️ 数据保护策略
1. **切换确认**：有未保存内容时切换页面弹出确认
2. **批量操作确认**：删除等危险操作需要二次确认
3. **自动保存**：防止意外丢失内容
4. **本地存储**：数据存储在用户本地，隐私安全

这个完整的交互逻辑设计确保了Qulome工具的用户体验流畅、功能完整、逻辑清晰。每个界面都有明确的职责分工，用户可以高效地完成从内容创作到最终发布的完整工作流程。